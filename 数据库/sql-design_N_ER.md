# 数据库设计和E-R模型

1. #### 大概流程

   1. 概念设计阶段
   2. 逻辑设计阶段
   3. 物理设计阶段

2. ### 设计选择

   1. 冗余: 信息应该只出现一次, 而不需要有太多重复
   2. 不完整: 完整的实体结构有利于建模

3. ### 实体-联系模型

   1. 三个基本概念

      + 实体集: ==实体==是现实世界可区别于其他对象的实体或对象;

        ​	==实体集==是相同类型(或有相同性质)的实体集合;

        ​	实体通过一组==属性==来定义, 属性是每个成员拥有的描述性性质, 每个属性都有一个==值==

        **因此一个数据库包括一组实体集, 每个实体集包含任意数量的相同类型的实体**

      + 联系集: ==联系==是多个实体之间的相互关联.

        ​	==联系集==则是同类联系的集合

        ​	实体集直接的关系叫做==参与==

        ​	E-R模式中的一个==联系实例==指在所建模的现实世界中的命名实体间的一个关联

        ​	实体在联系中的角色称为==角色==

        ​	联系也可以具有描述性属性, 即**外键**

      + 属性: 每个属性都有一个取值范围, 成为==域==, 或==值集==

        ​	**实体集的属性, 是将实体集映射到域的键值对**

        + 简单与复合属性: 简单属性是原子的, 不可再细分, 复合则可以再划分
        + 单值与多值属性: 对于某个实体的属性的取值唯一, 则是单值属性(身份证号码), 有多个值的是多值属性, 如电话号码
        + 派生属性: 可以从其他相关属性或尸体派生出来的属性

   2. 约束: 定义数据必须满足的约束

      1. 映射基数: 一个实体通过联系集能同时与多少个实体联系的个数
      2. 码: 码允许我们可以确定一个足以区分实体的集合, 也可以唯一的标识联系, 并将联系区分开来.
         1. **超码**: 一个或多个属性的集合, 使得我们可以在一个实体集中唯一地标识一个实体
         2. **候选码**: 超码的最小子集
         3. **主码(primary key)**: 被用来区分同个实体集中不同实体的候选码
         4. **联系集的主码**: 联系集联系的多个实体中唯一标识这个联系的实体的主码(可以多个)
      3. **参与约束**: 实体集E每个实体都参与到联系集R中, 称为==全部参与==, 实体集中部分实体参与联系集R, 成为==部分参与==
   
   3. 设计问题
   
      1. 用实体集还是属性: 某些属性是否应该独立出来作为一个新的实体集, 还是归在实体集里面.
      2. 用实体集还是联系集: 当描述发生在实体间的行为时采用联系集.
      3. 用二元集还是n元集
   
   4. **弱实体集**: 没有足够属性形成主码的实体集
   
      + 弱实体集必须与另一个==标识实体集==或==属主实体集==的关联才有意义, 也就是说它==存在依赖==于标识实体集, 而标识实体集==拥有==弱实体集,将这种联系称为==标识性联系==
      + **分辨符**: 用于区分弱实体集中的属性集合, 如编号
   
   5. 拓展的E-R特性:
   
      1. **特殊化**: 在实体集中的某些实体, 这些实体在某些属性中区分其他实体, 因此需要分组, 在实体集中的分组即称为==特殊化==, 特殊化在E-R图中用ISA三角形来表示, ==ISA联系==又称为==父类-子类联系==.
      2. **一般化**: 是高层实体集与一个或多个底层实体集间的包含关系. 即找出实体集的父类
      3. 属性继承: 高层属性被低层属性继承, 一个子类继承于单个父类称为==单继承==, 一个子类继承于多个父类称为==多继承==
      4. **聚集**: 聚集是一种抽象, 在这种情况下, 联系被看作是是一个高层实体, 被其他组合实体所继承